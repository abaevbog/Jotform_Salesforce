(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,a,t){},18:function(e,a,t){e.exports=t(26)},24:function(e,a,t){},26:function(e,a,t){"use strict";t.r(a);var s=t(0),n=t.n(s),l=t(11),c=t.n(l),i=(t(16),t(2)),o=t(3),r=t(6),d=t(4),m=t(1),u=t(5),h=(t(24),t(28)),p=t(12),E=t.n(p),b=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(r.a)(this,Object(d.a)(a).call(this,e))).state={password:"",failedLogin:!1},t.handleClick=t.handleClick.bind(Object(m.a)(t)),t.handleChange=t.handleChange.bind(Object(m.a)(t)),t.handleKeyDown=t.handleKeyDown.bind(Object(m.a)(t)),t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"handleClick",value:function(e,a){E.a.ajax({url:"https://zlf1wgdua9.execute-api.us-east-1.amazonaws.com/jotform/jotformproxy",method:"POST",data:JSON.stringify({Value:"!",Verif:this.state.password}),success:function(a){"Authorized"==a?e.props.setPassword(e.state.password):e.setState({failedLogin:!0})},error:function(a){e.setState({failedLogin:!0})}})}},{key:"handleChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleKeyDown",value:function(e){"Enter"===e.key&&this.handleClick(this)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"container"},this.state.failedLogin?n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col align-self-center"},"Login failed")):null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-sm-2"},"Password:"),n.a.createElement("div",{className:"col-sm-10"},n.a.createElement("input",{className:"input",placeholder:"case sensitive",onChange:this.handleChange,onKeyDown:this.handleKeyDown}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col align-self-center"},n.a.createElement("div",{className:"buttons"},n.a.createElement(h.a,{onClick:function(){return e.handleClick(e)}},"Authorise")))))}}]),a}(s.Component),f=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(r.a)(this,Object(d.a)(a).call(this,e))).state={password:e.password,input:"",results:[],loading:!1},t.handleChange=t.handleChange.bind(Object(m.a)(t)),t.querySalesForce=t.querySalesForce.bind(Object(m.a)(t)),t.sendLeadsBack=t.sendLeadsBack.bind(Object(m.a)(t)),t.handleKeyDown=t.handleKeyDown.bind(Object(m.a)(t)),t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"handleChange",value:function(e){console.log(e.target.value),this.setState({input:e.target.value})}},{key:"sendLeadsBack",value:function(e){this.props.setLeads(e)}},{key:"handleKeyDown",value:function(e){"Enter"===e.key&&this.querySalesForce(this)}},{key:"querySalesForce",value:function(e){e.setState({loading:!0}),E.a.ajax({url:"https://zlf1wgdua9.execute-api.us-east-1.amazonaws.com/jotform/jotformproxy",method:"POST",data:JSON.stringify({Value:this.state.input,Verif:this.state.password}),success:function(a){console.log(a);var t=JSON.parse(a),s=JSON.parse(t).records;e.sendLeadsBack(s)}})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"container"},this.state.loading?n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col align-self-center"},"Loading lead ...")):null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-sm-4"},"Client's last name or email:"),n.a.createElement("div",{className:"col-sm-8"},n.a.createElement("input",{className:"input",onChange:this.handleChange,onKeyDown:this.handleKeyDown}))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col align-self-center"},n.a.createElement("div",{className:"buttons"},n.a.createElement(h.a,{onClick:function(){return e.querySalesForce(e)}},"Search lead")))))}}]),a}(s.Component),v=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(r.a)(this,Object(d.a)(a).call(this,e))).state={selected:!1,email:"None"},t.sendEmail=t.sendEmail.bind(Object(m.a)(t)),t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"sendEmail",value:function(e){var a=c.a.findDOMNode(e.target).parentNode.childNodes[1].textContent;this.props.setSelectedEmail(a)}},{key:"render",value:function(){return n.a.createElement("tr",{onClick:this.sendEmail,className:this.props.email==this.props.selectedEmail?"selected":""},n.a.createElement("th",{scope:"row"},this.props.name),n.a.createElement("td",null,this.props.email),n.a.createElement("td",null,this.props.address))}}]),a}(s.Component),w=t(27),k=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(r.a)(this,Object(d.a)(a).call(this,e))).state={leads:e.leads,selected:null,rows:[]},t.setSelectedEmail=t.setSelectedEmail.bind(Object(m.a)(t)),t.leadClick=t.leadClick.bind(Object(m.a)(t)),t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"leadClick",value:function(e){console.log("LEAD CLICK"),console.log(e.target)}},{key:"componentDidMount",value:function(){var e=this,a=[];this.state.leads.forEach(function(t){var s=t.Address.street+","+t.Address.city+","+t.Address.state+","+t.Address.postalCode;a.push(n.a.createElement(v,{key:t.Email,name:t.Name,email:t.Email,address:s,setSelectedEmail:e.setSelectedEmail,selectedEmail:e.state.selected}," "))}),this.setState({rows:a}),window.JFCustomWidget.subscribe("submit",function(){var e={valid:!0,value:this.state.selected};window.JFCustomWidget.sendSubmit(e)})}},{key:"setSelectedEmail",value:function(e){for(var a=this,t=[],s=0;s<5;s++)t.push(n.a.createElement(v,{name:"SomeName",email:s+"email@kuku.com",address:"This address is suuper long like the longeder theins ever",setSelectedEmail:this.setSelectedEmail,selectedEmail:e}," "));this.state.leads.forEach(function(s){var l=s.Address.street+","+s.Address.city+","+s.Address.state+","+s.Address.postalCode;t.push(n.a.createElement(v,{key:s.Email,name:s.Name,email:s.Email,address:l,setSelectedEmail:a.setSelectedEmail,selectedEmail:e}," "))}),console.log("set email"),this.setState({rows:t,selected:e})}},{key:"render",value:function(){return n.a.createElement("div",{className:"container"},n.a.createElement(w.a,{className:"justify-content-md-center"},n.a.createElement("div",{className:"table-wrapper-scroll-y my-custom-scrollbar"},n.a.createElement("table",{className:"table table-bordered mb-0 "},n.a.createElement("thead",null,n.a.createElement("tr",{className:"base"},n.a.createElement("th",{scope:"col-sm"},"Name"),n.a.createElement("th",{scope:"col"},"Email"),n.a.createElement("th",{scope:"col"},"Address"))),n.a.createElement("tbody",null,this.state.rows)))),n.a.createElement(w.a,{className:"justify-content-md-center"},n.a.createElement("div",{className:"col align-self-center"},n.a.createElement(h.a,{id:"button",onClick:this.props.backToSearch},"Go back to search"))))}}]),a}(s.Component),g=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(r.a)(this,Object(d.a)(a).call(this,e))).state={password:null,selectedEmail:null,leads:[],page:1},t.setPassword=t.setPassword.bind(Object(m.a)(t)),t.setLeads=t.setLeads.bind(Object(m.a)(t)),t.backToSearch=t.backToSearch.bind(Object(m.a)(t)),t}return Object(u.a)(a,e),Object(o.a)(a,[{key:"setPassword",value:function(e){this.setState({password:e,page:2}),console.log("set password")}},{key:"setLeads",value:function(e){this.setState({leads:e,page:3}),console.log(e)}},{key:"backToSearch",value:function(){this.setState({page:2})}},{key:"render",value:function(){return 1==this.state.page?n.a.createElement(b,{setPassword:this.setPassword}," "):2==this.state.page?n.a.createElement(f,{password:this.state.password,setLeads:this.setLeads}):n.a.createElement(k,{leads:this.state.leads,backToSearch:this.backToSearch}),n.a.createElement("div",{className:"App"},n.a.createElement("h2",null," Salesforce Lead Lookup"),n.a.createElement(k,{leads:this.state.leads,backToSearch:this.backToSearch}))}}]),a}(s.Component);t(25),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,1,2]]]);
//# sourceMappingURL=main.a1dcaf5a.chunk.js.map